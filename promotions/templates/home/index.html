<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promotions Home</title>
    <!-- Latest compiled and minified CSS of bootstrap 3.3.7 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Latest compiled and minified CSS of slickJs 1.8.0 -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.0/slick.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.0/slick-theme.css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet"
    <!-- Latest compiled and minified Jquery library 3.3.1 -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript of bootstrap 3.3.7-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified slickJs 1.8.0  -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.0/slick.min.js"></script>
    <!-- Latest compiled and minified slickJs 1.8.0  -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <style>
        .slick-track {
            height: 460px; /*594*/
        }
        .slick-dots {
            bottom: 20px;
        }
        .slick-dots {
            bottom: -54px;
        }
        .slick-dots li button {
          display: block;
          width: 20px;
          height: 20px;
          padding: 0;
          border: none;
          border-radius: 100%;
          background-color: #efe4e4 !important;
          box-shadow: inset 0 1px 1px 0 #999 !important;
        }
        .slick-dots li button:hover, .slick-dots li button:focus, .slick-dots li.slick-active button {
          background-color: #333333 !important;
          box-shadow: inset 0 1px 1px 0 #555 !important;
        }
        .slick-dotted.slick-slider {
            margin-bottom: 0;
        }
        .slider-docks{
            background-color: #e1e1e1;
            height: 90px;
            border-bottom: 1px solid #FFFFFF;
        }

        #login-btn {
            min-width: 340px;
            padding: 20px;
        }
        #li-welcome {
            padding-top: 14px;
            color: #ffffff;
            margin-right: 15px;
        }
        #li-username {
            padding-top: 7px;
            color: #ffffff;
        }

        .title-page{
            background-image: -moz-linear-gradient(top, #e5e5e5, white 50%);
            background-image: -webkit-linear-gradient(top, #e5e5e5 0, white 50%);
            background-image: linear, to bottom, #e5e5e5 0, white 50%;
            background-repeat: repeat-x;
        }
        .continer-title-page {
            font-family: 'Open Sans', sans-serif;
            padding-top: 40px;
            color: #969696;
        }
        .filters {
            padding-top: 15px;
        }
        .panel-promotion {
            margin-bottom: 20px;
            background-color: #B680CE;
            border: 1px solid transparent;
            border-radius: 0;
            -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.05);
            box-shadow: 0 1px 1px rgba(0,0,0,.05);
            height: 260px;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
        }
        .promotion-information{
            position: absolute;
            left: 0;
            top: 0;
            max-width: 360px;
            width: 100%;
            z-index: 2;
        }
        .promotion-title {
            color: #FFFFFF;
        }
        .promotion-cost {
            font-size: 18px;
            color: #FFFFFF;
            text-align: right;
        }
        .promotion-description {
            font-size: 16px;
            color: #765486;
            font-weight: 700;
            text-align: right;
        }
        .btn-show-promotion {
            color: #b581ce;
            background-color: #ffffff;
            border-color: #ffffff;
        }
        .container-image{
            position: absolute;
            top: 77px;
            left: -68px;
            max-width: 318px;
            width: 100%;
            overflow: hidden;
            height: 234px;
            z-index: 0;
        }
        .show-promotion-container {
            position: relative;
            height: 248px;
        }
        .show-promotion-text {
            position: absolute;
            bottom: 0;
            right: 0;
            color: #FFFFFF;
        }
        .relative-container {
            position: relative;
        }
        .rotate-container {
            position: absolute;
            max-width: 278px;
            width: 100%;
            height: 215px;
            background-color: #FFFFFF;
            transform: rotate(-18deg);
            top: 81px;
            left: 0;
            padding: 10px;
        }
        footer {
            background-color: #EEEEEE;
            height: 300px;
            width: 100%;
            padding: 60px 40px;
            color: #606060;
        }
        /***************************************************************/
        /* Estilos de la modal de las promociones */
        /********************/
        .img-modal-promotion{
            height: 238px;
            overflow: hidden;
        }
        .img-modal-promotion img {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <header >
        <nav class="navbar navbar-inverse" style="margin-bottom: 0;border-radius: 0;">
            <div class="container scontainer-fluid" style="padding-left: 40px; padding-right: 40px;">
                <div class="navbar-header">
                    <button type="button" class="collapsed navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-3" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button> <a href="#" class="navbar-brand">cPromociones</a>
                </div>
                <div class="navbar-right" id="" style="padding-right: 10px;">
                    <ul class="nav navbar-nav navbar-right" style="margin-right: 0;">
                        <li id="li-register" style="display: none;">
                            <a id="btn-register" href="#">Registrar</a>
                        </li>
                        <li id="li-welcome" style="display: none;">
                            Bienvenido
                        </li>
                        <li id="li-username" style="display: none;">
                            <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: transparent; color: #FFFFFF;">
                                    <span class="btn-username"></span> <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Menu de usuario:</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="https://cpromotion.herokuapp.com/profile/">Profile</a></li>
                                    <li><a href="#">Promociones</a></li>
                                    <li><a href="#">Categorías</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li style="padding: 10px;">
                                        <button id="btn-logout" class="btn btn-danger btn-block" type="submit">Sing out <i class="fas fa-sign-out-alt"></i></button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li id="li-login" style="display: none;">
                            <div class="dropdown" style="padding-top: 8px;">
                                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    Login <web></web>
                                    <span class="caret"></span>
                                </button>
                                <ul id="login-btn" class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                    <li>
                                        <form>
                                            <div class="form-group">
                                                <label for="loginEmail">Username:</label>
                                                <input type="email" class="form-control" id="login-username" placeholder="Username">
                                            </div>
                                            <div class="form-group">
                                                <label for="loginPassword">Password</label>
                                                <input type="password" class="form-control" id="login-password" placeholder="Password">
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-6" style="margin-top: -10px; padding-left: 0;">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox"> Remember me
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6" style="text-align: right; padding-right: 0;">
                                                    <a href="#" id="lost-password">Lost your password?</a>
                                                </div>
                                            </div>
                                            <hr style="clear: both;margin-top: 54px; margin-bottom: 20px;">
                                            <div class="form-group">
                                                <div class="col-sm-offset-4 col-sm-8" style="padding-right: 0">
                                                    <button id="login-promotion" type="submit" class="btn btn-default btn-block">Ingresar</button>
                                                </div>
                                            </div>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="header-slide">
            <div><img style="width: 100%;" src="https://cdn.lynda.com/course/473879/473879-636457524814693787-16x9.jpg" alt="image html5 ejemplo"></div>
            <div><img style="width: 100%;" src="http://gaming.gigabyte.eu/AMDmotherboard/images/AMD_mb_board_noLED_1920.jpg" alt="image html5 ejemplo"></div>
            <div><img style="width: 100%;" src="http://www.kimberley.co.za/wp-content/uploads/2017/06/29621_Fish_Aways-Hash_Brown_Burger_Special-PM-201706.jpg" alt="image html5 ejemplo"></div>
        </div>
    </header>
    <nav>
        <div class="slider-docks"></div>
    </nav>
    <article class="title-page">
        <div class="continer-title-page container">
            <h2 style="margin-top: 0; text-align: center;"> CPromotion Icreíbles Promociones </h2>
            <p style="padding-top: 25px; text-align: center; font-size: 14px;">Cpromotion es una página web que te permitirá encontrar las mejores promciones de tu ciudad a un solo click, busca por categorías y por ciudades de Colombia para encontrar la promocion en tus artículos deseados.</p>
            <div class="filters row">
                <div class="col-md-offset-2 col-md-4">
                    <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Ciudad <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Ciudad</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">Separated link</a></li>
                                </ul>
                            </div><!-- /btn-group -->
                            <input type="text" class="form-control" aria-label="...">
                        </div><!-- /input-group -->
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Categoría <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Ciudad</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">Separated link</a></li>
                                </ul>
                            </div><!-- /btn-group -->
                            <input type="text" class="form-control" aria-label="...">
                        </div><!-- /input-group -->
                </div>
            </div>
            <hr class="container" style="margin: 40px; border-top: 1px solid #e0e0e0;">
            <section class="container">
                <div class="promotion-container container-fluid">
                    <div id="promotions" class="row"></div>
                </div>
                <div class="pagination" style="text-align: center; padding: 0 20px; width: 100%;">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </section>
        </div>
    </article>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h3 style="font-weight: bold;margin-top: -5px;">Titulo</h3>
                    <p>Information</p>
                    <p>Find here</p>
                    <p>Last Promotion</p>
                    <p>Category</p>
                    <p>City</p>
                </div>
                <div class="col-md-4" style="text-align: center">
                    <p>cPromotion - Bogotá | 2018 | All rights reserved</p>
                    <p>Street 21 Ave 24A - 73</p>
                    <p>cpromotion@email.com</p>
                </div>
                <div class="col-md-4" style="text-align: right;margin-top: -5px;">
                    <h3 style="font-weight: bold";>Social links</h3>
                    <p><i class="fab fa-facebook-square"></i> facebook/asdasdasd </p>
                    <p><i class="fab fa-youtube"></i> youtube/asdasdsa</p>
                    <p><i class="fab fa-twitter"></i> twitter/asdasdasd</p>
                    <p><i class="fab fa-linkedin"></i> linkedin/asdasdsa</p>
                </div>
            </div>
        </div>
    </footer>
    <section id="modal-promotion"></section>
    <section id="modal-register">
        <div class="modal fade modal-register" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <form>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h3 class="modal-title"><b>Registro de usuarios</b></h3>
                        </div>
                        <div class="modal-body">
                            <p>Completa los siguientes campos para guardar tu registro:</p>
                            <hr>
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="name">Nombre:</label>
                                        <input type="text" class="form-control" id="register-name" placeholder="Su nombre">
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName">Apellidos:</label>
                                        <input type="text" class="form-control" id="register-last-name" placeholder="Sus Apellidos">
                                    </div>
                                    <div class="form-group">
                                        <label for="pais">Pais:</label>
                                        <input type="text" class="form-control" id="register-country" placeholder="País de residencia">
                                    </div>
                                    <div class="form-group">
                                        <label for="ciudad">Ciudad:</label>
                                        <input type="text" class="form-control" id="register-city" placeholder="Ciudad de residencia">
                                    </div>
                                    <div class="form-group">
                                        <label for="direccion">Dirección de correspondencia:</label>
                                        <input type="text" class="form-control" id="register-address" placeholder="Dirección de correspondencia">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="username">Username:</label>
                                        <input type="text" class="form-control" id="register-username" placeholder="Nombre de usuario">
                                    </div>
                                    <div class="form-group">
                                        <label for="password">Contraseña:</label>
                                        <input type="password" class="form-control" id="register-password" placeholder="Contraseña">
                                    </div>
                                    <div class="form-group">
                                        <label for="confirmPassword">Confirmar contraseña:</label>
                                        <input type="password" class="form-control" id="register-confirm-password" placeholder="Confirmar contraseña">
                                    </div>
                                    <div class="form-group">
                                        <label for="email">email:</label>
                                        <input type="email" class="form-control" id="register-email" placeholder="Email">
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button id="send-register" type="submit" class="btn btn-primary">Registrarme</button>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </section>
    <script type="text/javascript">
        $(document).ready(function () {

            // ==============================================================================================
            // Promotion object creator controller
            // ==============================================================================================
            var getData;

            $.getJSON("https://cpromotion.herokuapp.com/list_promotion").done(function(data){
                getData = data;
                var colorCtr = 0;
                console.log(getData);
                var promotion_background, promotion_description;
                for( var i=0; i<getData.length; i++){
                   var fields =  getData[i].fields;
                   switch (colorCtr) {
                       case 0:
                           promotion_background = "#B680CE";
                           promotion_description = "#765486";
                           break;
                       case 1:
                           promotion_background = "#3B9FE6";
                           promotion_description = "#195686";
                           break;
                       case 2:
                           promotion_background = "#26C4A2";
                           promotion_description= "#247663";
                           break;
                       default:
                           promotion_background = "#D7675A";
                           promotion_description = "#844137";
                           break;
                   }

                    $("#promotions").append(
                        "<div class='col-md-4'>" +
                            "<div id='promotion"+ getData[i].pk +"' class='panel panel-default panel-promotion modal-promotion' style='background-color:"+ promotion_background  +"';>" +
                                "<div class='panel-body' style='padding: 5px 15px;'>" +
                                    "<div class='container-img-cost' style='position: relative'>" +
                                        "<div class='promotion-information'>" +
                                            "<h2 class='promotion-title'>" + fields.promotion_name + "</h2>" +
                                            "<p class='promotion-cost'> $" + fields.cost + "</p>" +
                                            "<p id='promotion-description"+getData[i].pk+"' class='promotion-description' style='color:"+ promotion_description +";'>" + fields.description + "</p>" +
                                        "</div>" +
                                        "<div class='show-promotion-container'><div class='show-promotion-text'>Ver promoción</div></div>"+
                                        "<div class='container-image'>" +
                                            "<div class='relative-container'>" +
                                                "<div class='rotate-container'>" +
                                                    "<img src='" + fields.image + "' alt='Ejemplo de imagen' style='width: 100%;'>" +
                                                "</div>" +
                                            "</div>" +
                                        "</div>" +
                                    "</div>" +
                                "</div>" +
                            "</div>" +
                        "</div>"
                    );
                    colorCtr++;
                    if(colorCtr === 4) { colorCtr = 0; }
                    var getPromoDescription = $("#promotion-description"+getData[i].pk).text().substring(0, 56);
                    console.log(getPromoDescription);
                    $("#promotion-description"+getData[i].pk).html("").append(getPromoDescription+"...");
                }
            }).fail(function (jqxhr, textStatus, error) {
                var err = textStatus + ", " + error;
            });

            // ==============================================================================================
            // Promotion Modal controller
            // ==============================================================================================
            $("#promotions").on("click", ".modal-promotion", function(e){
                e.preventDefault();
                var promotionId = $(this).attr("id");
                var splitId = promotionId.split("n");
                $.getJSON("https://cpromotion.herokuapp.com/list_promotion").done(function(data){
                    var promotionData = data;
                    // ======================================================================================
                    // Recorre el json para buscar cual es la promocion a consultar
                    for(var i=0; i<promotionData.length; i++){
                        var getId = promotionData[i].pk;
                        if( parseInt(getId) === parseInt(splitId[1])){
                            console.log(promotionData[i].fields);
                            // ==============================================================================
                            // Imprimime la promocion selecionada con sus propiedades
                            $("#modal-promotion").html("").append(
                                "<div class='modal fade modal-box' data-backdrop='static' data-keyboard='false' tabindex='-1' role='dialog'>" +
                                    "<div class='modal-dialog modal-lg' role='document'>" +
                                        "<div class='modal-content'>" +
                                            "<div class='modal-header'>" +
                                                "<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>" +
                                                "<h4 class='modal-title'>"+ promotionData[i].fields.promotion_name+"</h4>" +
                                            "</div>" +
                                            "<div class='modal-body'>" +

                                                "<div class='panel panel-default'>" +
                                                    "<div class='panel-body'> " +
                                                        "<div class='row'>" +
                                                            "<div class='col-md-6'>" +
                                                                "<div class='img-modal-promotion'>"+
                                                                    "<img src='"+ promotionData[i].fields.image +"' alt='Smiley face' height='42' width='42'>" +
                                                                "</div>"+
                                                            "</div>" +
                                                            "<div class='col-md-6'>" +
                                                                "<div class='panel panel-default'>" +
                                                                    "<div class='panel-body'> " +
                                                                        "<div class='promo-detail'><h4>Detalle de la promoción</h4></div>" +
                                                                        "<hr style='margin: 5px 0;'>" +
                                                                        "<div class='promo-cost row'><div class='col-md-4'><b>Valor:</b></div><div class='col-md-8'>"+ promotionData[i].fields.cost + "</div></div>" +
                                                                        "<div class='promo-city row'><div class='col-md-4'><b>ciudad:</b></div><div class='col-md-8'>"+ promotionData[i].fields.city + "</div></div>" +
                                                                        "<div class='promo-cost row'><div class='col-md-4'><b>Finaliza:</b></div><div class='col-md-8'>"+ promotionData[i].fields.end_date + "</div></div>" +
                                                                        "<div class='promo-description'><b>Descripción:</b>" +
                                                                            "<hr style='margin: 5px 0;'>" +
                                                                            "<div class='text-promo-description'>" +
                                                                                promotionData[i].fields.description +
                                                                            "</div>" +
                                                                        "</div>" +
                                                                    "</div>" +
                                                                "</div>" +
                                                            "</div>" +
                                                        "</div>" +
                                                    "</div>" +

                                                "</div>" +
                                                "<hr>" +
                                                "<div class='row'>"+
                                                    "<div class='col-md-4'> hgfhgfhf"+

                                                    "</div>" +
                                                    "<div class='col-md-4'> jhgjhgjh"+

                                                    "</div>" +
                                                    "<div class='col-md-4'>"+
                                                    "</div>" +
                                                "</div>" +
                                                "<hr>" +
                                                "<div class='promo-message-tittle'><h4>Agrega un comentario:</h4></div>" +
                                                "<div class='panel panel-default'>" +
                                                    "<div class='panel-body'> " +
                                                        "<div class='email-message'>"+
                                                            "<div class='input-group'>" +
                                                              "<span class='input-group-addon' id='basic-addon1'>Email</span>" +
                                                              "<input type='email' class='form-control' placeholder='Emai' aria-describedby='basic-addon1'>" +
                                                            "</div>" +
                                                        "</div>" +
                                                        "<div class='email-message'>"+
                                                            "<textarea class='form-control' rows='3'></textarea>" +
                                                        "</div>" +
                                                        "<hr>" +
                                                        "<div class='panel panel-default'>" +
                                                            "<div class='panel-body'> " +
                                                                "<div class='form-group'>" +
                                                                    "<label for='exampleInputEmail1'>Pedro perez: </label>" +
                                                                    "<div class='promo-message-tittle'>Mensaje de pedro perez respecto a esta promocion.</div>" +
                                                                "</div>" +
                                                            "</div>" +
                                                        "</div>" +
                                                    "</div>" +
                                                "</div>" +

                                            "</div>" +
                                            "<div class='modal-footer'>" +
                                                "<button type='button' class='btn btn-default close-modal' data-dismiss='modal'>Close</button>" +
                                                "<button type='button' class='btn btn-primary'>Save changes</button>" +
                                            "</div>" +
                                        "</div>" +
                                    "</div>" +
                                "</div>"
                            );

                            $(".modal-box").modal('show');

                        }
                    }

                }).fail(function (jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                });
            });

            $("#modal-promotion").on("click", ".close-modal", function(e){
                e.preventDefault();
                $(".modal-box").modal('hide');
            });
            // ==============================================================================================
            // Register controller
            // ==============================================================================================
            $("#send-register").on("click", function (e) {
                e.preventDefault();
                if( $("#register-password").val() != $("#register-confirm-password").val() ){
                    console.log("las contraseñas no coinciden");
                } else {
                    $.ajax({
                        type: "POST",
                        url: "https://cpromotion.herokuapp.com/register_users/",
                        data: JSON.stringify({
                            first_name: $("#register-name").val(),
                            last_name: $("#register-last-name").val(),
                            country: $("#register-country").val(),
                            city: $("#register-city").val(),
                            address: $("#register-address").val(),
                            username: $("#register-username").val(),
                            password: $("#register-password").val(),
                            email: $("#register-email").val()
                        }),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function(data){
                            console.log(data);
                            window.location.href = "https://cpromotion.herokuapp.com/";
                        },
                        failure: function(errMessage){
                            console.log("Error enviando datos de registro");
                        }
                    });
                }
            });

            $("#btn-register").on("click", function(){
               $(".modal-register").modal('show');
            });
            // ==============================================================================================
            // Login controller
            // ==============================================================================================
            $("#login-promotion").on("click", function(e){
                e.preventDefault();
                $.ajax({
                    type: "POST",
                    url: "https://cpromotion.herokuapp.com/login_users/",
                    data: JSON.stringify({
                        username: $("#login-username").val(),
                        password: $("#login-password").val()
                    }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data){
                        if(data.message === "ok"){
                            window.location.href = "https://cpromotion.herokuapp.com/";
                        } else {
                            console.log(data.message); // rear el texto para mostrar el retorno
                        }

                    },
                    failure: function(errMessage){
                        console.log("Error enviando datos de registro");
                    }
                });
            });
            // ==============================================================================================
            // Logout controller
            // ==============================================================================================
            $("#btn-logout").on("click", function(e){
               e.preventDefault();
               $.getJSON("https://cpromotion.herokuapp.com/logout_users/").done(function(data){
                    if( data.message === "ok"){
                        window.location.href = "https://cpromotion.herokuapp.com/";
                    } else {
                        console.log("Error al cerrar sesion");
                    }
               }).fail(function(jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                });
            });
            // ==============================================================================================
            // Is auth controller
            // ==============================================================================================
            (function (){
                $.getJSON("https://cpromotion.herokuapp.com/logged_users/").done(function(data){
                    if( data.message === "logged"){
                        $("#li-login, #li-register").css("display", "none");
                        $("#li-welcome, #li-username").css("display", "block");
                        $(".btn-username").html("").append(data.username);
                    } else {
                        $("#li-login, #li-register").css("display", "block");
                        $("#li-welcome, #li-username").css("display", "none");
                    }
                }).fail(function(jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                });
            })();
            // ==============================================================================================
            // Slider controller
            // ==============================================================================================
            $('.header-slide').slick({
                dots: true,
                arrows: false,
                infinite: true,
                speed: 500,
                fade: true,
                cssEase: 'linear',
                autoplay: true,
                autoplaySpeed: 6000
            });


        })
    </script>
</body>
</html>